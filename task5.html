<!DOCTYPE HTML> 
<html> 
	<head> 
		<meta charset="utf-8"> 
		<title>Bla</title> 
	</head> 
	<body> 
		<script type="text/javascript" src="jquery-3.3.1.min.js"></script>
		<script> 
			var dat  = [ 
			{ 
				text: 'Животные', 
				children: [ 
				{ 
					text: 'Млекопитающий', 
					children: [ 
					{ 
						text: 'Коровы', 
						children: [] 
					}, 
					{ 
						text: 'Ослы', 
						children: [] 
					}, 
					{ 
						text: 'Собаки', 
						children: [] 
					}, 
					{ 
						text: 'Тигры', 
						children: [] 
					} 
					] 
				}, 
				{ 
					text: 'Другие', 
					children: [ 
					{ 
						text: 'Змеи', 
						children: [] 
					}, 
					{ 
						text: 'Птицы', 
						children: [] 
					}, 
					{ 
						text: 'Ящерицы', 
						children: [] 
					} 
					] 
				} 
				] 
			}, 
			{ 
				text: 'Рыбы', 
				children: [ 
					{ 
						text: 'Аквариумные', 
						children: [ 
						{ 
							text: 'Гуппи', 
							children: [] 
						}, 
						{ 
							text: 'Скалярии', 
							children: [] 
						} 
						] 
					}, 
					{ 
						text: 'Морские', 
						children: [ 
						{ 
							text: 'Морская форель', 
							children: [] 
						} 
						] 
					} 
				] 
			}]; 
			function CreateList(data) { 
				var li = $("<li>"); 
				li.text(data.text); 
				if (data.children.length != 0){ 
					var ul = $("<ul>"); 
					for (var i = 0; i < data.children.length; i++){
						ul.append(CreateList(data.children[i]));
					}
					li.append(ul); 
				} 
				return li; 
			} 
			var ul = $("<ul>"); 
			for (var i = 0; i < dat.length; i++){ 
				ul.append(CreateList(dat[i]));
			}
			$('body').append(ul); 
			$("li").click(function(e){ 
				e.stopPropagation(); 
				$(this).children("ul").fadeToggle(500); 
			}); 
			$( "li" ).each(function() { 
				var inf= $(this).clone().children("ul").remove().end(); 
				console.log( "Text: " + inf.text() + "\r\nCount li: " + $(this).find("li").length ); 
			}); 
		</script> 
	</body> 
</html>	
				
		